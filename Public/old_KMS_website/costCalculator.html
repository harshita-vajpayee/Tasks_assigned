<!DOCTYPE html>
<html>
<head>
    <title>Recipe Quantity Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            
            margin: 0;
            padding: 0;
        }

        .container {
            display: flex; 
           
        }

        .form-container {
            flex: 1; /* Allow the form container to take available space */
            padding: 30px;
            max-height: 360px;
            max-width: 400px;
            background-color: #f9f9f9; /* Light background color for the form */
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin: 20px; /* Add margin to create spacing between the form and table */
        }

        h2 {
            text-align: center;
            color: #333;
        }

        form {
            display: flex;
            flex-direction: column;
        }

        label {
            font-size: 16px;
            margin-top: 10px;
        }

        input[type="text"],
        input[type="number"] {
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        /* Custom CSS for the select element */
        select#recipe {
            padding: 10px;
            height: 40px;
        }

        input[type="submit"] {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 20px;
            margin-top: 15px;
            cursor: pointer;
            border-radius: 4px;
        }

        input[type="submit"]:hover {
            background-color: #45a049;
        }

        .table-container {
            flex: 1; /* Allow the table container to take available space */
            padding: 20px;
            /* max-width: 800px; */
            /* border-left: 1px solid #4a4949;  */
            background-color: #fff; /* White background color for the table */
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }

        tbody tr:hover {
            background-color: #f2f2f2;
        }

        button {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 6px 12px;
            cursor: pointer;
            border-radius: 4px;
        }

        button:hover {
            background-color: #e53935;
        }
    </style>
</head>
<body>
 <!-- Navbar -->
 <nav class="navbar navbar-expand-lg bg-primary shadow">
    <div class="container-fluid d-flex justify-content-between">
        <div class="d-flex justify-content-center align-items-center my-0 py-0">
            <button class="btn text-white" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions"
                aria-controls="offcanvasWithBothOptions">
                <span class="navbar-toggler-icon text-white"></span>
            </button>
            <a class=" navbar-brand text-white text-uppercase" href="#">Kitchen</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
        <div class=" d-flex justify-content-end">
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 z-100">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-white" href="#" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">Menu</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                </ul>
                <img class="object-fit-cover border rounded-circle " style="width: 40px;" src="/images/profile.jpg"
                    alt="profile">
            </div>
        </div>
    </div>
</nav>

<!--  Sidebar -->
<div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
    aria-labelledby="offcanvasWithBothOptionsLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Backdrop with scrolling</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <div class="list-group list-group-flush mx-2 mt-4">
            <a href="/home.html" class="listOfLinks list-group-item list-group-item-action py-2 ripple"
                aria-current="true">
                <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>ICS Home</span>
            </a>
            <a href="/menu_management.html" class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-chart-area fa-fw me-3"></i><span>Menu Management</span>
            </a>
            <a href="/all_meal_count.html" class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-lock fa-fw me-3"></i><span>All Meals Count</span>
            </a>
            <a href="/all_cooking_sheets.html"
                class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-chart-line fa-fw me-3"></i><span>All Cooking Sheets</span>
            </a>
            <a href="/" class="active listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-chart-pie fa-fw me-3"></i><span>Serving Data Entry</span>
            </a>
            <a href="/purchase_list.html" class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-chart-bar fa-fw me-3"></i><span>Purchase List</span>
            </a>
            <a href="/" class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-globe fa-fw me-3"></i><span>All Recipes</span>
            </a>
            <a href="/calendar.html" class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-building fa-fw me-3"></i><span>Event Calendar</span>
            </a>
            <a href="/costCalculator.html" class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-calendar fa-fw me-3"></i><span>Cost Calculator</span>
            </a>
            <a href="#" class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-users fa-fw me-3"></i><span>About</span>
            </a>
            <a href="#" class="listOfLinks list-group-item list-group-item-action py-2 ripple">
                <i class="fas fa-logout fa-fw me-3"></i><span>Logout</span>
            </a>

        </div>
    </div>
</div>




    <div class="container">
        <div class="form-container">
            <h2>Recipe Quantity Form</h2>
            <form action="#" method="post">
                <label for="recipe">Recipe:</label>
                <select id="recipe" name="recipe" required>
                    <option value="" disabled selected>Select a recipe</option>
                    <!-- <option value="Pasta" >Pasta</option>
                    <option value="Pizza" >Pizza</option>
                    <option value="Salad" >Salad</option> -->
                    <!-- Add other recipes here -->
                </select>

                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" required>
                <input type="submit" value="Add to Table">
            </form>
        </div>
   
    <div class="table-container">
        <h2>Recipe Quantity Table</h2>
        <table id="recipeTable">
            <thead>
                <tr>
                    <th>Recipe Name</th>
                    <th>Quantity</th>
                    <th>Cost</th>
                    <!-- <th>Ingredients</th> -->
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Table rows will be dynamically added using JavaScript -->
            </tbody>
            <tfoot>
                <tr>
                    <!-- <td colspan="1"></td> -->
                    <td colspan="2"><strong>Total:</strong></td>
                    <td id="totalCost">$0</td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

    <script>
        // JavaScript to dynamically create and update the table
        const recipeSelect = document.getElementById('recipe');
        const quantityInput = document.getElementById('quantity');
        const addToTableButton = document.querySelector('input[type="submit"]');
        const recipeTable = document.getElementById('recipeTable').getElementsByTagName('tbody')[0];

        // Define an object with recipe prices
        const recipePrices = {
            Pasta: {
                price: 5,
                ingredients: "Pasta, Tomato Sauce, Garlic, Olive Oil, Basil, Salt, Black Pepper",
            },
            Pizza: {
                price: 8,
                ingredients: "Pizza Dough, Tomato Sauce, Mozzarella Cheese, Mushrooms, Bell Peppers, Olives, Oregano",
            },
            Salad: {
                price: 4,
                ingredients: "Lettuce, Cucumbers, Tomatoes, Carrots, Red Onion, Olives, Olive Oil, Vinegar",
            },
            Veggie_Burger: {
                price: 6,
                ingredients: "Burger Buns, Veggie Patty, Lettuce, Tomato, Onion, Pickles, Ketchup, Mustard",
            },
            Spinach_Lasagna: {
                price: 10,
                ingredients: "Lasagna Noodles, Spinach, Ricotta Cheese, Mozzarella Cheese, Tomato Sauce, Garlic, Onion",
            },
            Vegetable_Tacos: {
                price: 7,
                ingredients: "Taco Shells, Black Beans, Corn, Avocado, Lettuce, Salsa, Lime",
            },
            Veggie_Sushi: {
                price: 12,
                ingredients: "Sushi Rice, Nori Seaweed, Avocado, Cucumber, Carrots, Sesame Seeds, Soy Sauce, Wasabi",
            },
            Vegetable_Curry: {
                price: 9,
                ingredients: "Assorted Vegetables (e.g., Cauliflower, Potatoes, Peas), Coconut Milk, Curry Spices",
            },
            Vegetable_Stir_Fry: {
                price: 6,
                ingredients: "Assorted Vegetables (e.g., Broccoli, Bell Peppers, Carrots, Snow Peas), Soy Sauce, Ginger, Garlic",
            },
            Veggie_Omelette: {
                price: 5,
                ingredients: "Eggs, Bell Peppers, Tomatoes, Spinach, Cheese, Salt, Black Pepper",
            },
            // Add other recipes and their prices here
        };

        const recipeNames = Object.keys(recipePrices);
        recipeNames.forEach((name) => {
            const option = document.createElement('option');
            option.value = name;
            option.textContent = name.replace(/_/g, ' ');
            recipeSelect.appendChild(option);
        });

        addToTableButton.addEventListener('click', (event) => {
            event.preventDefault();

            if (recipeSelect.selectedIndex === 0) {
                alert('Please select a recipe before adding to the table.');
                return;
            }

            const selectedOption = recipeSelect.options[recipeSelect.selectedIndex];
            const selectedRecipe = selectedOption.value;
            const recipeName = selectedOption.textContent;
            const quantity = parseInt(quantityInput.value);
            const price = recipePrices[selectedRecipe].price;

            if (quantity <= 0 || isNaN(quantity)) {
            alert('Please enter a valid positive quantity.');
            return;
        }
            const cost = quantity * price;

            

            // Check if the selected recipe already exists in the table
            const existingRow = findExistingRow(selectedRecipe);

            if (existingRow) {
                // Update the quantity and cost for the existing row
                const existingQuantity = parseInt(existingRow.cells[1].textContent);
                const newQuantity = quantity;
                existingRow.cells[1].textContent = newQuantity;
                existingRow.cells[2].textContent = `$${newQuantity * price}`;
            } else {
                // If the recipe is not in the table, add a new row
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td>${recipeName}</td>
                    <td>${quantity}</td>
                    <td>$${cost}</td>
                    <td width="180px">
                    <button onclick="removeRow(this)">Remove</button>
                    <button onclick="showIngredients('${recipeName}')">Ingredients</button> <!-- Show Ingredients button -->
                </td>
                `;
                recipeTable.appendChild(newRow);
            }

            // Clear form inputs after adding to the table
            recipeSelect.selectedIndex = 0;
            quantityInput.value = '';
            updateTotalCost();
        });

        function updateTotalCost() {
            // Function to update the total cost of all the recipes in the table
            let totalCost = 0;
            const rows = recipeTable.getElementsByTagName('tr');
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                if (row.cells.length === 4) { // Ignore footer row
                    const costCell = row.cells[2];
                    const cost = parseFloat(costCell.textContent.replace('$', ''));
                    totalCost += cost;
                }
            }

            // Update the total cost in the table footer
            const totalCostCell = document.getElementById('totalCost');
            totalCostCell.textContent = `$${totalCost.toFixed(2)}`;
        }

        function findExistingRow(recipe) {
            // Function to find an existing row with the given recipe name
            const rows = recipeTable.getElementsByTagName('tr');
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const recipeNameCell = row.cells[0];
                if (recipeNameCell.textContent === recipe) {
                    return row;
                }
            }
            return null;
        }

        function removeRow(button) {
            // Function to remove the table row when the "Remove" button is clicked
            const row = button.parentNode.parentNode;
            recipeTable.removeChild(row);

            updateTotalCost();
        }

        function showIngredients(recipeName) {
            const ingredients = recipePrices[recipeName.replace(/ /g, '_')].ingredients.split(', ');

            // Create a new popup window with the ingredients table
            const popupWindow = window.open('', '_blank', 'height=300,width=400');

            // Generate the ingredients table in the popup window
            const ingredientsTable = `
                <table>
                    <thead>
                        <tr>
                            <th>Ingredient</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${ingredients.map(ingredient => `<tr><td>${ingredient.trim()}</td></tr>`).join('')}
                    </tbody>
                </table>
            `;

            // Set the content of the popup window to the ingredients table
            popupWindow.document.body.innerHTML = ingredientsTable;
        }
    </script>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
crossorigin="anonymous"></script>
</body>
</html>
